on:
  push:
    branches:
      - main

permissions:
  contents: read
  # id-token: write

jobs:
  deploy:
    # environment:
    #   name: github-pages
    #   url: ${{ steps.build-publish.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - id: deploy
        uses: bitovi/github-actions-deploy-docker-to-ec2@v0.2.0
        with:
          aws_access_key_id: ${{ secrets.AWS_ACCESS_KEY_ID}}
          aws_secret_access_key: ${{ secrets.AWS_SECRET_ACCESS_KEY}}
          aws_session_token: ${{ secrets.AWS_SESSION_TOKEN}}
          aws_default_region: us-east-1
          domain_name: 3.112.29.156
#          sub_domain: app
#          tf_state_bucket: my-terraform-state-bucket
#          dot_env: ${{ secrets.DOT_ENV }}
#          app_port: 3000
#          additional_tags: "{\"key1\": \"value1\",\"key2\": \"value2\"}"